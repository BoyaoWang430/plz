<script type="text/x-template" id="viz-template">
    <grid-layout
            :layout="layout"
            :col-num="24"
            :row-height="30"
            :is-draggable="true"
            :is-resizable="true"
            :is-mirrored="false"
            :vertical-compact="true"
            :margin="[10, 10]"
            :use-css-transforms="true">
        <grid-item v-for="item in layout"
                   :x="item.x"
                   :y="item.y"
                   :w="item.w"
                   :h="item.h"
                   :i="item.i"
                   :key="item.i">
            <viz-struct v-if="addrMap" :data="addrMap[item.i]"
                        :addrMap="addrMap" :title="item.i"
                        @showPtr="showPtr"
                        style="width:100%;height:100%;"/>
        </grid-item>
    </grid-layout>
</script>
<script>
    Vue.component('viz', {
        template: '#viz-template',
        props: ['addrMap'],
        data: function () {
            return {
                layout: [{"x": 0, "y": 0, "w": 4, "h": 5, "i": "__root__"}]
            }
        },
        methods: {
            showPtr: function(ptr) {
                this.layout.push({"x": 5, "y": 5, "w": 4, "h": 9, "i": ptr})
            }
        }
    });
</script>